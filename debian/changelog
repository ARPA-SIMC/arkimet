arkimet (0.30-1) UNRELEASED; urgency=low

  * New scanning configuration for grib2

 -- Enrico Zini <enrico@debian.org>  Tue, 27 Oct 2009 17:30:54 +0100

arkimet (0.29-1) UNRELEASED; urgency=low

  * arki-scan and arki-query now exit with status 2 if one of their sources
    did not produce any data
  * fixed a wrong test that caused some grib_api errors to slip

 -- Enrico Zini <enrico@debian.org>  Thu, 15 Oct 2009 11:54:50 +0100

arkimet (0.28-1) UNRELEASED; urgency=low

  * Added "arki-dump --aliases" and "arki-dump --aliases URL"
  * --postprocess conflicts with --data but not with --sort, now that sort is
    done before postprocessing
  * Implemented --restrinct in arki-query, arki-check and arki-mergeconf

 -- Enrico Zini <enrico@debian.org>  Sat, 26 Sep 2009 14:30:11 +0100

arkimet (0.27-1) UNRELEASED; urgency=low

  * Fixed codec for floats and doubles
  * Encoding now mostly works by appending to a single string, instead of
    creating many strings, which should improve performance
  * Get rid of oldsummary and arki-sbenchmark
  * Sorting, if requested is now done server-side and before preprocessing
  * Removed several unused arki-* utilities (arki-summarise, arki-grep,
    arki-scan-grib, arki-dispatch, arki-sort)
  * Reorganised arki-dump as a simple dump to/from yaml
  * Reorganised arki-scan and arki-check to simplify their code and clear up
    some inconsistencies in some command line option combinations. Some
    behaviour may change. One behaviour changes: arki-scan --verbose becomes
    arki-scan --status
  * arki-dump --query
  * arki-server can now expand a query with /qexpand
  * Send queries to the server with the aliases expanded, but first validate
    the query against each server to see if the alias expansions would match
  * Also send the metadata to the --postprocess processor process
  * New tool: arki-xargs
  * arki-dump --config
  * conf/scan-grib1: properly scan layers

 -- Enrico Zini <enrico@debian.org>  Thu, 17 Sep 2009 14:37:43 +0200

arkimet (0.25-1) UNRELEASED; urgency=low

  * Use nag module to report validation issues details in arki-check
    --accurate
  * Removed --salvage backwards compatibility option
  * Correctly handle dataset data files that grow past 2**31 bytes.
    Note: this changes the structure of indices and binary metadata, existing
    metadata and summary files need to be regenerated
  * Use new varint encoding for several bits of binary metadata
    (took advantage of the opportunity since the format has changed)

 -- Enrico Zini <enrico@debian.org>  Tue, 25 Aug 2009 22:44:06 +0100

arkimet (0.24-1) UNRELEASED; urgency=low

  * Allow to access grib values as gribl.val, gribs.val and gribd.val, because
    grib_api can give different values depending on how it is queried
  * Force some types when scanning gribs, because grib_api 1.8.0 defaults to
    presenting some (like centre) as strings instead of numbers
  * Put yearly files in subdirectories, so that, like with all others,
    maintenance can ignore data files in the dataset root dir
  * ondisk2 check: detect files with out of order data that have been
    truncated
  * Removed code for automatic deletion of old data from the archives. Data
    files can now only be removed from the archives manually
  * Since there are no automatic archive deletions anymore, archive check now
    acts the same as archive repack
  * Store relative pathnames in .archive/ .metadata files
  * During repack, check for consistency of the data that's moved around
  * arki-mergeconf: only scan directories contaning config files
  * arki-check: -s is not needed anymore. It now interrupts checking if
    salvaging is needed, as salvaging was wrong anyway since it picked a
    random item to remove.
  * arki-check: implemented --accurate

 -- Enrico Zini <enrico@debian.org>  Mon, 24 Aug 2009 16:27:32 +0100

arkimet (0.23-1) UNRELEASED; urgency=low

  * Fixed query generations for summary queries spanning more than a partial
    month

 -- Enrico Zini <enrico@debian.org>  Wed, 05 Aug 2009 15:13:49 +0100

arkimet (0.22-1) UNRELEASED; urgency=low

  * ondisk2 "archive age": archival after a given age
  * ondisk2 "delete age": deletion after a given age
  * signal aware --data output also for ondisk1
  * ondisk2: if a problem is found during check or repack, disallow repack
    until a check is made, to avoid accidentally deleting files to be
    reindexed
  * ondisk2: new summary cache and more sqlite3-friendly queries, for
    performance speedups during queries
  * print timing information in arki-scan --verbose

 -- Enrico Zini <enrico@debian.org>  Sun, 19 Jul 2009 17:21:06 +0100

arkimet (0.21-1) UNRELEASED; urgency=low

  * When rebuilding ondisk2 datafiles, keep the last of the duplicate entries,
    not the first
  * Cleanup unused entries of accessory tables before vacuum
  * Delete existing .metadata files after repacking ondisk2 datafiles
  * Block SIGTERM and SIGINT when outputting one item of data, so that
    interrupting arki-query with ^C does not give a truncated output file
  * Implemented "delete age" on ondisk2 datasets (files will be deleted on
    repack)

 -- Enrico Zini <enrico@debian.org>  Fri, 10 Jul 2009 00:07:32 +0100

arkimet (0.20-1) UNRELEASED; urgency=low

  * Fixed ondisk reindex (previously it was mistakenly just a rebuild if the
    summaries)
  * When rebuilding ondisk datafiles, keep the last of the duplicate entries,
    not the first

 -- Enrico Zini <enrico@debian.org>  Thu, 09 Jul 2009 09:41:21 +0100

arkimet (0.19-1) UNRELEASED; urgency=low

  * New upstream version
     - Use the sqlite_busy_timeout function to globally set timeouts instead
       of handling SQLITE_BUSY at each query
     - ondisk2: implemented dataset maintenance
     - ondisk2: cache global summaries for summary queries without reftime
     - use the right file offsets when rescanning datasets

 -- Enrico Zini <enrico@debian.org>  Tue, 19 May 2009 11:51:24 +0100

arkimet (0.18-1) UNRELEASED; urgency=low

  * Implemented new storage type 'ondisk2'
  * Release database read lock by caching all the results in RAM before
    starting to stream the results
  * All SQL queries now check for SQLITE_BUSY return values and retry after
    waiting a bit

 -- Enrico Zini <enrico@debian.org>  Wed, 29 Apr 2009 12:22:48 +0200

arkimet (0.17-1) UNRELEASED; urgency=low

  * Stop scanning for bounding boxes: they are instead computed from the Area
    metadata
  * Fixed dependency on DB-All.e
  * Build without bufr or grib libraries

 -- Enrico Zini <enrico@debian.org>  Tue, 07 Apr 2009 18:23:54 +0100

arkimet (0.16-1) UNRELEASED; urgency=low

  * Handle configuration values wrapped by double quotes
  * Fixed an off-by-one buffer overflow in summary.cc
  * Added missing Build-deps
  * Match rules with BUILT_SOURCES if builddir is not empty
  * When writing to a dataset, wait until all reads are done (note:
    it can wait forever if a reader got stuck)

 -- Enrico Zini <enrico@debian.org>  Wed, 28 Jan 2009 16:57:44 +0000

arkimet (0.15-1) UNRELEASED; urgency=low

  * Documentation improvements
  * arki-server can now report errors that happen at arki-query startup
  * Fixed timeranges reported by GRIB2 scan

 -- Enrico Zini <enrico@debian.org>  Wed Jan 14 17:42:11 2009 +0000

arkimet (0.14-1) UNRELEASED; urgency=low

  * Attempted to fix sqlite locking problems
  * Added arki-config, with a dataset configuration wizard

 -- Enrico Zini <enrico@debian.org>  Tue, 06 Jan 2009 20:44:51 +0000

arkimet (0.12-1) UNRELEASED; urgency=low

  * Fixed file descriptor leak in sqlite indices
  * Fetch the data earlier in the dispatch process, to prevent errors in
    critical sections of the code

 -- Enrico Zini <enrico@debian.org>  Wed, 26 Nov 2008 16:39:06 +0000

arkimet (0.11-1) UNRELEASED; urgency=low

  * Implemented arki-scan --testdispatch
  * Implemented arki-check --remove
  * Assorted code cleanup

 -- Enrico Zini <enrico@debian.org>  Tue, 25 Nov 2008 20:56:48 +0000

arkimet (0.10-1) UNRELEASED; urgency=low

  * Lua error messages now point to the source file
  * arki-mergeconf validates filter syntax
  * arki-scan prints source file information for filter errors
  * Implemented repository locking
  * Improved build dependencies for etch

 -- Enrico Zini <enrico@debian.org>  Wed, 19 Nov 2008 15:06:33 +0000

arkimet (0.9-1) UNRELEASED; urgency=low

  * Fixed filtering of summaries
  * Time ranges for GRIB1 have non-negative P1 and P2
  * Added "count" and "datasets" reports

 -- Enrico Zini <enrico@debian.org>  Wed, 15 Oct 2008 18:06:07 +0200

arkimet (0.8-1) UNRELEASED; urgency=low

  * New upstream release
     - levels and time ranges for GRIB2
     - scanning rules for GRIB2
     - fixed inline metadata queries
     - fixed parsing and serialisation of time range and reftime queries
     - better logging in arki-server

 -- Enrico Zini <enrico@debian.org>  Wed, 03 Sep 2008 17:26:03 +0200

arkimet (0.7-1) UNRELEASED; urgency=low

  * New upstream release
     - changed the format of the summaries to be much faster

 -- Enrico Zini <enrico@debian.org>  Fri, 15 Aug 2008 12:14:46 +0100

arkimet (0.6-1) UNRELEASED; urgency=low

  * New upstream release
     - arki-query --sort
     - arki-scan --movework
  * Added init.d scripts and logrotate configuration to optionally manage
    arki-server

 -- Enrico Zini <enrico@debian.org>  Wed, 13 Aug 2008 12:03:54 +0100

arkimet (0.5-1) UNRELEASED; urgency=low

  * New upstream release
     - arki-query --merged
     - experimental dataset monitoring: arki-monitor
     - added 'run' metadata type
     - faster dataset scan by matching file names for reftime info
     - access datasets by URL
     - arki-scan --moveok --moveko

 -- Enrico Zini <enrico@debian.org>  Wed,  6 Aug 2008 15:39:55 +0200

arkimet (0.4-1) UNRELEASED; urgency=low

  * New upstream release.
     - arki-query syntax has changed
     - allows to use normal file with arki-query as if they were datasets
     - arki-scan-bufr became the generic scanner arki-scan

 -- Enrico Zini <enrico@debian.org>  Thu, 19 Jun 2008 15:23:27 +0100

arkimet (0.3-1) UNRELEASED; urgency=low

  * New upstream release

 -- Enrico Zini <enrico@debian.org>  Tue, 27 May 2008 16:38:42 +0100

arkimet (0.2-1) UNRELEASED; urgency=low

  * New upstream version.  Dataset on-disk layout has changed.

 -- Enrico Zini <enrico@debian.org>  Wed, 09 Jan 2008 19:12:00 +0800

arkimet (0.1-1) UNRELEASED; urgency=low

  * Initial release. (Closes: #XXXXXX)

 -- Enrico Zini <enrico@debian.org>  Wed, 04 Jul 2007 11:44:22 +0100
